<!-- Link Helper for Multilingual Navigation -->
<!-- Usage: {% assign link_url = 'lessons/lesson1/' | link_for_lang: page.lang %} -->

{% comment %}
This file provides helper functions for generating language-appropriate links.
Include this in layouts where you need automatic link translation.
{% endcomment %}

{% capture newline %}
{% endcapture %}

<!-- Liquid doesn't have custom filters in GitHub Pages, so we'll use JavaScript helper instead -->
<script>
// JavaScript helper for link generation
window.SpellcodeLinkHelper = {
  // Generate appropriate link for given language
  linkForLang: function(basePath, language) {
    const baseUrl = '{{ site.baseurl }}';
    
    if (language === 'de') {
      // German language modifications
      if (basePath.includes('lessons/outline')) {
        return basePath.replace('lessons/outline', 'lessons/outline-de');
      } else if (basePath.includes('lessons/lesson')) {
        return basePath.replace(/lessons\/(lesson\d+)/, 'lessons/$1-de');
      } else if (basePath === '/' || basePath === '') {
        return 'index.de.html';
      }
    } else {
      // English language (default)
      if (basePath.includes('lessons/outline-de')) {
        return basePath.replace('lessons/outline-de', 'lessons/outline');
      } else if (basePath.includes('-de/')) {
        return basePath.replace(/lessons\/(lesson\d+)-de/, 'lessons/$1');
      } else if (basePath.includes('index.de.html')) {
        return '/';
      }
    }
    
    return basePath;
  },
  
  // Get current page equivalent in target language
  getPageInLanguage: function(targetLang) {
    const currentPath = window.location.pathname;
    const baseUrl = '{{ site.baseurl }}';
    
    // Remove base URL from current path
    let relativePath = currentPath.replace(baseUrl, '');
    if (relativePath.startsWith('/')) {
      relativePath = relativePath.substring(1);
    }
    
    return this.linkForLang(relativePath, targetLang);
  }
};
</script> 